# DailySchedule
## 日常记录 for Rust and zcore
六月末 AND 七月初

| Mon  | Tues | Wed  | Thur | Fri  | Sat  | Sun  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- |
|      |      |      |      |      | 27   | 28   |
| 29   | 30   | 1    | 2    | 3    | 4    | 5    |
| 6    | 7    | 8    | 9    | 10   | 11   | 12   |
| 13   | 14   | 15   | 16   | 17   | 18   | 19   |
| 20   | 21   | 22   | 23   | 24   | 25   | 26   |

=======

* [Day 0 (6.27)](#0)  
* [Day 1 (4.10)](#Day001)   
* [Day 2 (7.5)](#Day002)   
* [Day 3 (7.6)](#Day003)  
* [Day 4 (7.7)](#Day004)   
* [Day 5 (7.8)](#Day005)   
* [Day 6 (7.9)](#Day006)   
* [Day 7 (7.10)](#Day007)   
* [Day 8 (7.11)](#Day008)   
* [Day 9 (7.12)](#Day009)   
* [Day 10 (7.13)](#Day010)   
* [Day 11 (7.14)](#Day011)   
* [Day 12 (7.15)](#Day012)   
* [Day 13 (7.16)](#Day013)   
* [Day 14 (7.17)](#Day014)   
* [Day 15 (7.18)](#Day015)   
* [Day 16 (7.19)](#Day016)   

<span id="0"></span>
## Day 0

### 事件1： 学习Rust基础知识

《Rust编程之道》 第二章 语言精要 - 2.1 - 2.7

研究清楚关于 Rust的 <kbd> ownership</kbd>

### 事件2：完成rustlings 部分练习
<img src="https://github.com/dingiso/DailySchedule/blob/master/img/Day1.png?raw=true" alt="rustlings部分练习" width="40%" height="40%" />

### 问题：

**如何 选取重要的部分 赋予更多的精力 ， 而 繁杂的部分在实践中融会贯通？**

Rust 内容过于繁杂， 从面向对象的半编译半解释性 java 编程语言 到  编译型语言 Rust ，我试着通过安全的角度 或者 实用的角度去逐渐思考 为什么 要去 定义这样一个变量，定义成什么类型，怎样去表示他等方面，我还记得 老师 告诉我们 8/2 原则，学一门语言的 20% 常用的部分，而在实际中扩展自己的剩下80%。 但Rust试图将他的全部展现给我，我试着不断去理解，也探索了很多。

### 预计计划：  

1、学习剩下的 常用集合 ，智能指针 ， 泛型和trait  
2、完成 rustlings 的 剩下部分内容
3、温习 操作系统的 相关内容 

<span id="Day001"></span>

## Day 1

### 事件1： 学习Rust基础知识

《Rust编程之道》 第二章 语言精要 - 完成

[用Rust写操作系统](https://learningos.github.io/rcore_step_by_step_webdoc/#从零开始写-os)

### 事件2：完成rustlings 全部练习

<img src="https://github.com/dingiso/DailySchedule/blob/master/img/Day2.png?raw=true" alt="rustlings全部练习" width="40%" height="40%" />

### 问题：

**rust 教程中有哪些重点和操作系统需要用到的相关，需要学习的比较深入？**

### 预计计划：  

1、精通完善 模块 ，macro_rules! , 
2、利用 rust 完成 中长练习题
3、温习 操作系统的 相关内容、

<span id="Day002"></span>

## Day 2

### 事件1： 学习Rust基础知识

《Rust编程之道》 第三，四，五章  - 粗略看完

 Rust视频教程部分基础部分-看完-巩固复习

[Rust编程视频教程](https://www.bilibili.com/video/BV1xJ411B79h?from=search&seid=11648763424608637522)

### 事件2：对基础知识部分进行总结，形成xmind 文件

<img src="https://github.com/dingiso/DailySchedule/blob/master/img/Rust.png?raw=true" alt="rust总结" width="40%" height="40%" />

### 问题：

Rust 中 的 **Error E5020** 的相关问题

### 预计计划：  

1、细看剩下的章节 
2、利用 rust 完成 中长练习题
3、温习 操作系统的 相关内容

<span id="Day003"></span>

## Day3

### 事件1： 学习Rust基础知识

重点阅读《Rust编程之道》 第三、四、五章，理解类型系统和所有权；第九章，理解错误处理； 第十三章，理解Unsafe Rust）

 Rust视频教程部分基础部分-看完-巩固复习

[Rust编程视频教程](https://www.bilibili.com/video/BV1xJ411B79h?from=search&seid=11648763424608637522)

### 事件2：完成《Rust编程之道》第十章



### 解决问题：

Rust 中 的 全局变量，可变全局变量的声明

### 预计计划：  

1、细看剩下的章节 
2、利用 rust 完成 中长练习题
3、温习 操作系统的 相关内容

<span id="Day004"></span>
## Day4

### 事件1： 练习Rust

完成leetcode 5道练习题

### 事件2：读RISC-V 官方文档



### 解决问题：

Rust 中 linkedlist 等的数据结构

### 预计计划：  

1、进入RISC-v
2、利用 rust 完成 中长练习题
3、温习 操作系统的 相关内容

<span id="Day005"></span>

## Day5

今天有考试 ， 复习了一天 :blonde_woman:

<span id="Day006"></span>
## Day6

### 事件1： 读完 计算机组成原理 RISC-V 前两章



### 事件2： 看 浙大 的视频



### 解决问题：

Rust 中的 生命周期的内容

### 预计计划：  

1、继续研究RISC-v
2、利用 rust 完成 中长练习题
3、温习 操作系统的 相关内容

<span id="Day007"></span>

## Day16

### 事件1： 参加 每周一次的研讨会

参加组织的会议，了解到了很多相关的内容，着重的

### 事件2： 每日一题

[312.戳气球](https://leetcode-cn.com/problems/burst-balloons/)

### 事件3： 总结-提高

对一周的内容进行总结，做出下一周的规划

### 预计计划：  

1、进入 lab-2 的进程
2、对 lab-1 的成果进行统一的规划

<span id="Day017"></span>
## Day17

### 事件1： 钻研lab-2的内容，完成前两个小节

实现了内存的动态分配

<img src="https://github.com/dingiso/DailySchedule/blob/master/img/Day17-1.png?raw=true" alt="内存的动态分配"/>

探测了内核的结尾地址

<img src="https://github.com/dingiso/DailySchedule/blob/master/img/Day17-2.png?raw=true" alt="探测了内核的结尾地址"/>

### 事件2： 每日一题

[312.戳气球](https://leetcode-cn.com/problems/burst-balloons/)

### 事件3： lab-0 的总结

1. 为了借用新的特性 nightly
2. std 依赖操作系统 `#![no_std]` 禁用
3. `panic_handler` 也在std库中，但是在运行过程中必须实现，所以我们自己写一个
4. 异常时是要通过堆栈反向**捕获异常**并**清理现场**的，暂时不需实现，所以panic直接终止
5. `main`函数并不能作为操作系统入口，所以我们用`_start` 函数代替，并利用 `extern "C"` 和 `# [no_mangle]` 来使得他成为入口函数
6. 通过改变链接器参数，使得程序编译成不依赖其他运行时环境的裸机目标
7. 对于一个OS内核，他的起始地址和普通程序不同，在高地址上，通过更改-链接脚本
8. 通过更改链接脚本使得，内核放在正确的地址上，并依次按顺序排放，`_start` 在先.
9. 内核运行还需要环境支持，所以我们用汇编重写`_start` ，分配启动栈，并跳转到内核入口
10. 将汇编代码内联到`main.rs`中，并更改内核入口为`rust_main`
11. 建立`Makefile` 保存编译运行参数，方便直接调用运行
12. OpenSBI 所提供的`SBI`调用参数 **0-8** ，为我们提供操作操作系统的基本功能
13. 输出功能利用`core`中的输出函数调用`SBI`的单字符输出，并利用`println`等宏进行封装
14. 完善 `panic` 和 `abort` 功能

### 预计计划：  

1、继续 lab-2 的进程
2、

<span id="Day018"></span>

## Day18

### 事件1： 钻研lab-2的内容

参加组织的会议，了解到了很多相关的内容，着重的

### 事件2： 每日一题

[312.戳气球](https://leetcode-cn.com/problems/burst-balloons/)

### 事件3： lab-1 的总结

1. 中断处理首先要保存上下文(即寄存器)在栈中,并在中断后恢复,分为两部分: 

   * context :通用32个寄存器,保存触发中断的指令地址`sepc`和系统状态的`sstatus`
   * 单列 :保存中断主要信息和原因的 `scause` 和 `stval`,因为后面需要使用所以单独

2. 利用汇编将寄存器的值存储在栈中,注意栈寄存器`sp`就是`x2`,所以需要空出他

3. 利用 `STIE` 位开启时钟中断,利用 `sstatus` 的 `SIE` 位,允许内核态被中断打断

4. 通过`sbi_call` 可以预约下一次的时钟中断,`time`参数就是中断时间

5. 总结 时钟中断的调用过程

<img src="https://github.com/dingiso/DailySchedule/blob/master/img/TimeInterrupt.png?raw=true" alt="时钟中断"/>

### 事件4： 小的提议记录

lab-1 程序运行状态 Context 推荐加入源文件的注释 , 并去掉 `Scause` 的use

> 发生中断时，保存的寄存器
>
> 包括所有通用寄存器，以及：
>
> - `sstatus`：各种状态位
>
> - `sepc`：产生中断的地址
>
> ### `#[repr(C)]` 属性
>
> 要求 struct 按照 C 语言的规则进行内存分布，否则 Rust 可能按照其他规则进行内存排布



### 预计计划：  

1、继续 lab-2 的进程
2、

<span id="Day019"></span>
